<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Trung Tâm Hỗ Trợ Văn Lang</title>
  <link rel="stylesheet" href="css/style.css"> 
  <link rel="stylesheet" href="css/supportcenter.css">
</head>
<body>
  <div class="dashboard-container">
    <div class="header">
      <div class="user-info">
        <div class="avatar">TT</div>
        <div>
          <h1>Trung Tâm Hỗ Trợ Văn Lang</h1>
          <p class="user-role">Nhân viên: Nguyễn Thiện D</p>
        </div>
      </div>
      <nav class="nav">
    <a href="#tong-quan" class="active">Tổng quan</a>
    <a href="#xet-duyet-gia-su">Xét duyệt Gia sư</a>
    <a href="#lich-phong-van">Lịch phỏng vấn</a>
    <a href="#danh-sach-mon-hoc">Môn học</a>
    <a href="#bao-cao-thong-ke">Báo cáo & Thống kê</a>
    <a href="#ho-so">Hồ sơ</a>
    <a href="#inbox-supportcenter" id="inbox-supportcenter-menu">Hộp thư</a>
    <a href="#cai-dat">Cài đặt</a>
</nav>
    </div>

    <div id="tong-quan" class="section active">
        <h2>Tổng quan hoạt động</h2>
        <div class="schedule-stats">
          <div class="stat-item"><div class="stat-number">7</div><div class="stat-label">Hồ sơ chờ duyệt</div></div>
          <div class="stat-item"><div class="stat-number">26</div><div class="stat-label">Gia sư đang hoạt động</div></div>
          <div class="stat-item"><div class="stat-number">25</div><div class="stat-label">Môn học được hỗ trợ</div></div>
        </div>
    </div>

    <div id="xet-duyet-gia-su" class="section">
        <h2>Xét duyệt hồ sơ đăng ký làm Gia sư</h2>
        <div class="profile-card">
            <h3>Danh sách ứng viên mới</h3>
            <table>
              <thead>
                <tr><th>ID</th><th>Tên sinh viên</th><th>Môn đăng ký</th><th>Ngày nộp hồ sơ</th><th>Hành động</th></tr>
              </thead>
              <tbody id="tutor-approval-tbody"></tbody>
            </table>
        </div>
    </div>
    <div id="lich-phong-van" class="section">
    <h2>Quản lý Lịch phỏng vấn</h2>

    <div class="profile-card" style="margin-bottom: 30px;">
        <h3>Ứng viên chờ lên lịch</h3>
        <table>
          <thead>
            <tr>
                <th>Tên ứng viên</th>
                <th>Môn đăng ký</th>
                <th>Ngày nộp hồ sơ</th>
                <th>Hành động</th>
            </tr>
          </thead>
          <tbody id="unscheduled-tutors-tbody">
            </tbody>
        </table>
    </div>

    <div class="profile-card">
        <h3>Lịch phỏng vấn đã tạo</h3>
        <table>
          <thead>
            <tr>
                <th>Tên ứng viên</th>
                <th>Môn đăng ký</th>
                <th>Thời gian phỏng vấn</th>
                <th>Trạng thái</th>
            </tr>
          </thead>
          <tbody id="interview-schedule-tbody">
            </tbody>
        </table>
    </div>
</div>

    <div id="danh-sach-mon-hoc" class="section">
      <h2>Quản lý Môn học</h2>
      <div class="profile-card">
        <h3>Danh sách các môn học được hỗ trợ</h3>
        <table>
          <thead>
            <tr><th>Tên môn học</th><th>Khoa</th><th>Số lượng gia sư</th><th>Trạng thái</th></tr>
          </thead>
          <tbody>
            <tr><td>Lập trình hướng đối tượng</td><td>Công nghệ thông tin</td><td>8</td><td><span class="status-badge available">Đang hoạt động</span></td></tr>
            <tr><td>Toán rời rạc</td><td>Công nghệ thông tin</td><td>5</td><td><span class="status-badge available">Đang hoạt động</span></td></tr>
            <tr><td>Triết học Mác-Lênin</td><td>Khoa học Xã hội & Nhân văn</td><td>3</td><td><span class="status-badge available">Đang hoạt động</span></td></tr>
            <tr><td>Cơ sở dữ liệu</td><td>Công nghệ thông tin</td><td>6</td><td><span class="status-badge available">Đang hoạt động</span></td></tr>
            <tr><td>Kinh tế vi mô</td><td>Quản trị Kinh doanh</td><td>4</td><td><span class="status-badge available">Đang hoạt động</span></td></tr>
            <tr><td>Kiến trúc máy tính</td><td>Công nghệ thông tin</td><td>0</td><td><span class="status-badge busy">Đã Hủy</span></td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div id="bao-cao-thong-ke" class="section">
      <h2>Báo cáo & Thống kê</h2>
      
      <!-- Chỉ số tổng quan -->
      <div class="stats-overview">
        <div class="stat-item">
          <div class="stat-number">156</div>
          <div class="stat-label">Tổng sinh viên đăng ký</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">42</div>
          <div class="stat-label">Gia sư đang hoạt động</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">89%</div>
          <div class="stat-label">Tỷ lệ hài lòng</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">1,247</div>
          <div class="stat-label">Buổi học đã hoàn thành</div>
        </div>
      </div>

      <!-- Chart container -->
      <div class="charts-container">
        <div class="chart-card">
          <h3>Thống kê môn học theo trạng thái</h3>
          <canvas id="courseStatusChart" width="400" height="200"></canvas>
        </div>
        
        <div class="chart-card">
          <h3>Phân bố gia sư theo khoa</h3>
          <canvas id="tutorDistributionChart" width="400" height="200"></canvas>
        </div>
        
        <div class="chart-card">
          <h3>Đánh giá từ sinh viên</h3>
          <canvas id="studentFeedbackChart" width="400" height="200"></canvas>
        </div>
        
        <div class="chart-card">
          <h3>Thống kê theo tháng</h3>
          <canvas id="monthlyStatsChart" width="400" height="200"></canvas>
        </div>
        
        <div class="chart-card">
          <h3>Môn học được đăng ký nhiều nhất</h3>
          <canvas id="popularSubjectsChart" width="400" height="200"></canvas>
        </div>
      </div>

      <!-- Báo cáo chi tiết -->
      <div class="reports-section">
        <div class="report-card">
          <h3>Báo cáo từ sinh viên</h3>
          <div class="feedback-list" id="studentFeedbackList">
            <!-- Feedback sẽ được render bằng JS -->
          </div>
        </div>
        
        <div class="report-card">
          <h3>Báo cáo từ gia sư</h3>
          <div class="feedback-list" id="tutorFeedbackList">
            <!-- Feedback sẽ được render bằng JS -->
          </div>
        </div>
      </div>

      <!-- Thống kê môn học phổ biến -->
      <div class="popular-subjects-section">
        <div class="status-card">
          <h3>Thống kê chi tiết môn học phổ biến</h3>
          <div class="popular-subjects-table" id="popularSubjectsTable">
            <!-- Bảng thống kê môn học phổ biến -->
          </div>
        </div>
      </div>

      <!-- Môn học đang dạy vs đã kết thúc -->
      <div class="course-status-section">
        <div class="status-card">
          <h3>Môn học đang được dạy</h3>
          <div class="course-list" id="activeCoursesList">
            <!-- Danh sách môn học đang dạy -->
          </div>
        </div>
        
        <div class="status-card">
          <h3>Môn học đã kết thúc</h3>
          <div class="course-list" id="completedCoursesList">
            <!-- Danh sách môn học đã kết thúc -->
          </div>
        </div>
      </div>
    </div>

    <div id="ho-so" class="section">
      <h2>Hồ sơ nhân viên</h2>
      <div class="profile-grid" style="justify-content: center;">
        <div class="profile-card main-info" style="max-width: 600px;">
          <h3>Thông tin cơ bản</h3>
          <div class="profile-item"><span class="profile-label">Họ tên:</span><span class="profile-value">Nguyễn Thiện D</span></div>
          <div class="profile-item"><span class="profile-label">Mã nhân viên:</span><span class="profile-value">VLU-TTHT-001</span></div>
          <div class="profile-item"><span class="profile-label">Email:</span><span class="profile-value">thien.d.nguyen@vanlanguni.edu.vn</span></div>
          <div class="profile-item"><span class="profile-label">Chức vụ:</span><span class="profile-value">Nhân viên Hỗ trợ Học vụ</span></div>
          <div class="profile-item"><span class="profile-label">Ngày tham gia:</span><span class="profile-value">20/05/2024</span></div>
        </div>
      </div>
    </div>

    <div id="cai-dat" class="section">
  <h2>Cài đặt tài khoản</h2>
  <div class="settings-grid">
    <div class="settings-card">
      <h3>Thông tin cá nhân</h3>
      <form id="profileForm">
        <div class="avatar-upload-section">
          <div class="current-avatar">
            <span id="currentAvatarDisplay">TT</span>
          </div>
          <div class="avatar-options">
            <label>Chọn ảnh đại diện:</label>
            <div class="avatar-grid">
              <div class="avatar-option" data-avatar="TT">TT</div>
              <div class="avatar-option" data-avatar="👩‍💼">👩‍💼</div>
              <div class="avatar-option" data-avatar="👨‍💼">👨‍💼</div>
              <div class="avatar-option" data-avatar="VLU">VLU</div>
              <div class="avatar-option" data-avatar="⭐">⭐</div>
              <div class="avatar-option" data-avatar="💡">💡</div>
            </div>
          </div>
        </div>
        <label>Tên đầy đủ:</label>
        <input type="text" id="profileName" value="Nguyễn Thiện D" disabled>
        <label>Email:</label>
        <input type="email" value="thien.d.nguyen@vanlanguni.edu.vn" disabled>
        <label>Số điện thoại:</label>
        <input type="tel" id="profilePhone" value="0987654321">
        <button type="submit">Cập nhật</button>
      </form>
    </div>

    <div class="settings-card">
        <h3>Cài đặt hệ thống</h3>
        <form id="systemSettingsForm">
            <label>Số hồ sơ hiển thị mỗi trang:</label>
            <select id="itemsPerPage">
                <option value="10">10</option>
                <option value="20" selected>20</option>
                <option value="50">50</option>
            </select>
            <label>Email hỗ trợ mặc định:</label>
            <input type="email" id="supportEmail" value="support.mytutor@vanlanguni.edu.vn" disabled>
            <button type="submit">Lưu cài đặt hệ thống</button>
        </form>
    </div>

    <div class="settings-card">
      <h3>Thông báo</h3>
      <div class="notification-settings">
        <label><input type="checkbox" checked> Thông báo khi có hồ sơ gia sư mới</label>
        <label><input type="checkbox" checked> Thông báo lịch phỏng vấn sắp tới</label>
        <label><input type="checkbox"> Gửi báo cáo tổng kết tuần qua email</label>
        <label><input type="checkbox"> Bật thông báo đẩy trên trình duyệt</label>
      </div>
    </div>

    <div class="settings-card">
      <h3>Tài khoản & Chuyển đổi</h3>
      <div class="account-actions">
        <button class="btn-change-password" onclick="changePassword()">Đổi mật khẩu</button>
        <label for="role-switcher" style="margin-top: 15px; font-weight: 500; color: #555;">Xem trang với vai trò:</label>
        <select id="role-switcher" style="width: 100%; box-sizing: border-box; padding: 12px; margin-bottom: 16px; border: 2px solid rgb(225, 229, 233); border-radius: 8px; font-size: 14px;">
            <option value="learner">Sinh Viên</option>
            <option value="tutor">Gia Sư</option>
        </select>
        <button id="switchRoleBtn" style="width: 100%; padding: 12px; background: linear-gradient(135deg, rgb(76, 175, 80) 0%, rgb(69, 160, 73) 100%); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer;">Chuyển đổi</button>
        <hr style="width:100%; margin: 20px 0; border-color: #eee;">
        <button class="btn-logout" onclick="logout()">Đăng xuất</button>
      </div>
    </div>
  </div>
</div>

<div class="modal-overlay" id="approvalDetailModal">
  <div class="password-modal" style="max-width: 500px;">
    <div id="modalDetailContent">
      </div>
    <div class="modal-actions" style="margin-top: 20px;">
      <button type="button" class="btn-primary" onclick="closeDetailModal()">Đóng</button>
    </div>
  </div>
</div>

  <div class="modal-overlay" id="tutorModal">...</div>
  <div class="modal-overlay" id="scheduleModal">...</div>
  <div class="modal-overlay" id="courseModal">...</div>
  <div class="modal-overlay" id="revisionModal">...</div>
  
  <div class="modal-overlay" id="scheduleInterviewModal">
  <div class="password-modal" style="max-width: 450px;">
    <h3>Lên lịch phỏng vấn</h3>
    <form id="scheduleInterviewForm">
      <input type="hidden" id="scheduleTutorId">

      <div class="form-row">
        <label for="scheduleDate">Chọn ngày phỏng vấn:</label>
        <input type="date" id="scheduleDate" required style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc;">
      </div>
      <div class="form-row" style="margin-top: 15px;">
        <label for="scheduleTime">Chọn giờ phỏng vấn:</label>
        <input type="time" id="scheduleTime" required style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc;">
      </div>
      <div class="modal-actions" style="margin-top: 25px;">
        <button type="button" class="btn-secondary" onclick="closeScheduleModal()">Hủy</button>
        <button type="submit" class="btn-primary">Xác nhận</button>
      </div>
    </form>
  </div>
</div>

<div id="inbox-supportcenter" class="section">
  <h2>Hộp thư Trung tâm</h2>
  <div id="supportcenterInboxList">
    <!-- Danh sách thông báo từ tutor sẽ được render bằng JS -->
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="js/data-trungtam.js" defer></script>
  <script src="js/script-trungtam.js" defer></script>
</body>
</html>